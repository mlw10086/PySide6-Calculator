# 多功能计算器

**作者：Claude 4.0 sonnet**  
**版本：1.0.0**  
**基于：PySide6**

## 项目简介

这是一个功能全面、界面美观的多功能计算器，专为中国用户设计。支持标准计算、科学计算和程序员计算三种模式，具有现代化的中文界面和丰富的功能特性。

## 功能特色

### 🧮 三种计算模式
- **标准模式**：基础四则运算、百分比、开方、内存功能
- **科学模式**：三角函数、对数函数、指数函数、阶乘等高级数学功能
- **程序员模式**：进制转换（二进制、八进制、十六进制）、位运算

### 🎨 中国化界面设计
- 温和的蓝灰色主题配色
- 中文标签和提示信息
- 符合中国用户使用习惯的布局
- 现代化扁平设计风格

### 📝 智能功能
- 计算历史记录保存和管理
- 表达式输入验证
- 键盘快捷键支持
- 工具提示帮助
- 错误提示友好化

## 安装要求

- Python 3.7+
- PySide6

## 安装步骤

1. 克隆或下载项目文件
2. 安装依赖：
   ```bash
   pip install PySide6
   ```
3. 运行程序：
   ```bash
   python main.py
   ```

   或者在 Windows 上双击 `run_calculator.bat`

## 使用说明

### 基本操作
- 点击数字和运算符按钮进行计算
- 按 `=` 或 `Enter` 键执行计算
- 按 `C` 或 `Esc` 键清除所有内容
- 按 `CE` 键清除当前输入
- 按 `⌫` 或 `Backspace` 键删除最后一个字符

### 模式切换
- 使用标签页切换不同计算模式
- 快捷键：`Alt+1`（标准）、`Alt+2`（科学）、`Alt+3`（程序员）

### 内存功能
- `MC`：清除内存
- `MR`：读取内存值
- `MS`：将当前值存储到内存
- `M+`：将当前值加到内存
- `M-`：从内存中减去当前值

### 历史记录
- 按 `Ctrl+H` 或通过菜单打开历史记录
- 支持搜索历史计算
- 可重用历史表达式
- 显示使用统计信息

## 项目结构

```
calculator/
├── main.py                 # 程序入口
├── ui/                     # 用户界面模块
│   ├── main_window.py      # 主窗口
│   ├── display_widget.py   # 显示组件
│   ├── button_panel.py     # 按钮面板基类
│   ├── standard_panel.py   # 标准模式面板
│   ├── scientific_panel.py # 科学模式面板
│   ├── programmer_panel.py # 程序员模式面板
│   └── history_dialog.py   # 历史记录对话框
├── core/                   # 核心逻辑模块
│   ├── calculator_engine.py # 计算引擎
│   └── history_manager.py   # 历史记录管理
├── styles/                 # 样式模块
│   ├── style_manager.py    # 样式管理器
│   └── themes.qss          # QSS样式文件
└── README.md              # 说明文档
```

## 技术特点

- **架构设计**：采用模块化设计，职责分离清晰
- **信号槽机制**：使用 PySide6 的信号槽实现组件通信
- **样式系统**：基于 QSS 的主题样式系统
- **错误处理**：完善的异常处理和用户友好的错误提示
- **数据持久化**：JSON 格式保存历史记录

## 支持的计算功能

### 标准计算
- 四则运算：`+` `-` `×` `÷`
- 百分比计算：`%`
- 平方根：`√x`
- 平方：`x²`
- 倒数：`1/x`
- 正负号：`±`

### 科学计算
- 三角函数：`sin` `cos` `tan` `asin` `acos` `atan`
- 双曲函数：`sinh` `cosh` `tanh`
- 对数函数：`log` `ln`
- 指数函数：`exp` `10^x` `e^x`
- 幂运算：`x^y` `x²` `x³`
- 根运算：`√x` `∛x` `y√x`
- 阶乘：`n!`
- 常数：`π` `e`

### 程序员计算
- 进制转换：二进制、八进制、十进制、十六进制
- 位运算：`AND` `OR` `XOR` `NOT` `LSH` `RSH`
- 字长选择：BYTE、WORD、DWORD、QWORD

## 开发说明

本项目采用面向对象的设计模式，主要类包括：

- `MainWindow`：主窗口类，管理整体布局和用户交互
- `CalculatorEngine`：计算引擎，处理所有数学运算
- `DisplayWidget`：显示组件，管理表达式和结果显示
- `ButtonPanel`：按钮面板基类，提供通用按钮功能
- `HistoryManager`：历史记录管理器，处理数据持久化
- `StyleManager`：样式管理器，管理界面主题

## 许可证

本项目仅供学习和参考使用。

## 更新日志

### v1.0.0 (2025-01-27)
- 初始版本发布
- 实现三种计算模式
- 中国化界面设计
- 历史记录功能
- 键盘快捷键支持
